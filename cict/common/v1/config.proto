syntax = "proto3";

package cict.common.v1;

option cc_enable_arenas = true;
option go_package = "github.com/cictapis/cict-auth/cict/common/v1";

message Config {
  OtlpConfig otlp_config = 1;

  RedisConfig redis_config = 4;

  ServiceEndpointConfig server_config = 5;

  ServiceEndpointConfig service_auth_endpoint_config = 6;

  ServiceEndpointConfig service_course_endpoint_config = 7;

  DatabaseEndpointConfig database_auth_endpoint_config = 8;

  DatabaseEndpointConfig database_course_endpoint_config = 9;
  
  MetadataConfig metadata_config = 10;
}

message OtlpConfig {
  string address = 1;

  int32 port = 2;

  bool use_ssl_credentials = 3;

  string ssl_credentials_ca_cert_path = 4;
}

message ServiceEndpointConfig {
  string address = 1;

  int32 port = 2;

  string ca_cert_pem = 3;

  string server_cert_pem = 4;

  string server_key_pem = 5;

  bool tls_enable = 6;
}

message DatabaseEndpointConfig {
  string address = 1;

  int32 port = 2;

  string username = 3;

  string password = 4;

  string database = 5;

  bool migrations = 6;
}

message MetadataConfig {
  string session_id = 1;

  string user_slim = 2;

  string locale = 3;

  string tracer = 4;
}

message RedisConfig {
  string address = 1;

  int32 port = 2;

  string redis_password = 3;

  int32 redis_db = 4;

  int32 min_idl_conns = 5;

  int32 pool_size = 6;

  int32 pool_timeout = 7;

  int32 session_timeout = 8;
}
