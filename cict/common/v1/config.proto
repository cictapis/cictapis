syntax = "proto3";

package cict.common.v1;

option cc_enable_arenas = true;
option go_package = "github.com/cictapis/cict-auth/cict/common/v1";

message Config {
  OtTracerConfig otTracerConfig = 1;

  OtLoggerConfig otLoggerConfig = 2;

  OtMetricConfig otMetricConfig = 3;

  RedisConfig redisConfig = 4;

  ServiceEndpointConfig serverConfig = 5;

  ServiceEndpointConfig serviceAuthEndpointConfig = 6;

  ServiceEndpointConfig serviceCourseEndpointConfig = 7;

  DatabaseEndpointConfig databaseAuthEndpointConfig = 8;

  DatabaseEndpointConfig databaseCourseEndpointConfig = 9;
  
  MetadataConfig metadataConfig = 10;
}

message OtTracerConfig {
  string endpoints = 1;

  bool useSslCredentials = 2;

  string sslCredentialsCacertPath = 3;
}

message OtLoggerConfig {

}

message OtMetricConfig {

}

message ServiceEndpointConfig {
  string address = 1;

  int32 port = 2;

  string caCertPem = 3;

  string serverCertPem = 4;

  string serverKeyPem = 5;

  bool tlsEnable = 6;
}

message DatabaseEndpointConfig {
  string address = 1;

  int32 port = 2;

  string userName = 3;

  string password = 4;

  string database = 5;

  bool migrations = 6;
}

message MetadataConfig {
  string sessionId = 1;
}

message RedisConfig {
  string address = 1;

  int32 port = 2;

  string redisPassword = 3;

  int32 redisDb = 4;

  string redisDefaultDb = 5;

  int32 minIdlConns = 6;

  int32 poolSize = 7;

  int32 poolTimeout = 8;

  int32 sessionTimeout = 9;
}
